<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Side Scrolling Car Game</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: skyblue;
  }

  canvas {
    display: block;
    background: linear-gradient(#87CEEB, #ffffff 80%);
  }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

canvas.width = 800;
canvas.height = 400;

// Car properties
const car = {
  x: 100,
  y: 300,
  width: 50,
  height: 30,
  color: 'red',
  dy: 0,
  gravity: 0.6,
  jumpForce: -12,
  onGround: true
};

// Obstacles
let obstacles = [];
let obstacleFrequency = 120; // frames
let frameCount = 0;
let speed = 4;

// Key control
document.addEventListener('keydown', (e) => {
  if (e.code === 'Space' && car.onGround) {
    car.dy = car.jumpForce;
    car.onGround = false;
  }
});

// Game loop
function gameLoop() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Draw ground
  ctx.fillStyle = 'green';
  ctx.fillRect(0, 350, canvas.width, 50);

  // Car physics
  car.dy += car.gravity;
  car.y += car.dy;

  if (car.y + car.height >= 350) {
    car.y = 350 - car.height;
    car.dy = 0;
    car.onGround = true;
  }

  // Draw car
  ctx.fillStyle = car.color;
  ctx.fillRect(car.x, car.y, car.width, car.height);

  // Generate obstacles
  if (frameCount % obstacleFrequency === 0) {
    obstacles.push({
      x: canvas.width,
      y: 320,
      width: 30,
      height: 30,
      color: 'black'
    });
  }

  // Move and draw obstacles
  for (let i = obstacles.length - 1; i >= 0; i--) {
    const obs = obstacles[i];
    obs.x -= speed;
    ctx.fillStyle = obs.color;
    ctx.fillRect(obs.x, obs.y, obs.width, obs.height);

    // Collision detection
    if (
      car.x < obs.x + obs.width &&
      car.x + car.width > obs.x &&
      car.y < obs.y + obs.height &&
      car.y + car.height > obs.y
    ) {
      alert('Game Over!');
      document.location.reload();
    }

    // Remove off-screen obstacles
    if (obs.x + obs.width < 0) {
      obstacles.splice(i, 1);
    }
  }

  frameCount++;
  requestAnimationFrame(gameLoop);
}

// Start game
gameLoop();
</script>
</body>
</html>
