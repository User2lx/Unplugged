<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Minimal Side Scroller</title>
<style>
  html, body { margin:0; padding:0; overflow:hidden; background:#000; }
  canvas { display:block; }
</style>
</head>
<body>
<canvas id="game"></canvas>
<script>
// ===== Canvas =====
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

// ===== Player =====
const player = { x:100, y:0, w:40, h:50, dx:0, dy:0, speed:4, jump:12, grounded:false, facing:1 };

// ===== Controls =====
const keys = {};
window.addEventListener("keydown", e=>keys[e.key.toLowerCase()]=true);
window.addEventListener("keyup", e=>keys[e.key.toLowerCase()]=false);

// ===== Ground =====
const CHUNK = 800;
let groundChunks = [];

function getGroundY(){ return canvas.height - 50; }

function createChunk(index){
  groundChunks.push({x:index*CHUNK, y:getGroundY(), w:CHUNK, h:50});
}

function generateChunks(){
  const playerChunk = Math.floor(player.x/CHUNK);
  for(let i=playerChunk-1;i<=playerChunk+2;i++){
    if(!groundChunks.find(c=>c.x === i*CHUNK)) createChunk(i);
  }
}

// ===== Update =====
function update(){
  player.dx = 0;
  if(keys["a"]) player.dx=-player.speed;
  if(keys["d"]) player.dx=player.speed;
  if((keys["w"] || keys[" "]) && player.grounded){ player.dy=-player.jump; player.grounded=false; }

  player.dy += 0.6; // gravity
  player.x += player.dx;
  player.y += player.dy;

  generateChunks();

  // Collision
  player.grounded = false;
  groundChunks.forEach(g=>{
    if(player.x + player.w > g.x && player.x < g.x+g.w && player.y+player.h >= g.y && player.y+player.h <= g.y+10){
      player.y = g.y - player.h;
      player.dy = 0;
      player.grounded = true;
    }
  });
}

// ===== Draw =====
function draw(){
  ctx.fillStyle="#87ceeb";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  ctx.save();
  ctx.translate(-Math.max(0,player.x - canvas.width/3),0);

  // Draw ground
  ctx.fillStyle="#2ecc71";
  groundChunks.forEach(g=>{ ctx.fillRect(g.x,g.y,g.w,g.h); });

  // Draw player
  ctx.fillStyle="#ff4757";
  ctx.fillRect(player.x,player.y,player.w,player.h);

  ctx.restore();
}

// ===== Loop =====
(function loop(){ update(); draw(); requestAnimationFrame(loop); })();
</script>
</body>
</html>
